# Changelog

## [Unreleased]
### Added
### Changed
### Fixed
### Removed


## [1.7.4] - 2024-09-21
### Changed
- 兼容翻译文本编码格式UTF-8 with BOM或UTF-8，增强与其他兼容的工具导出的文本的兼容性，原先似乎与操作系统相关，win下为UTF-8 with BOM

## [1.7.3] - 2022-09-12
### Fixed
- 修复载入字体配置功能失效的问题


## [1.7.2] - 2022-07-27
修复怨声载道的脚本崩溃问题...
### Fixed
- 修复若不存在PS动作却保存了配置，脚本有可能崩溃的问题
- 修复如果配置中存有当前系统不存在的字体，脚本崩溃的问题，问题很严重且高发，因为配置会自动储存、启动时装载，很多时候表现为启动时崩溃

## [1.7.1] - 2021-09-23
### Changed
- 改进涂白功能填充颜色的精准度，之前取的点的颜色只采样单点，容易受文字附近的噪点干扰，已改为采样区域颜色
### Fixed
- 修复涂白功能，Label位置正好在位于文字上时，会涂白整个页面的问题

## [1.7.0] - 2021-09-19
重写了涂白功能的逻辑，避免各种神奇问题。
### Added
- 涂白功能，允许用户自定义容差
- 打开翻译文本时，自动探测所在目录下是否存在“images”等文件夹，若存在则默认当作图源文件夹（配合萌翻的工程导出结构）
### Changed
- 涂白功能，填充的颜色不再是白色，会自动取label所在的点的颜色来填充
### Fixed
- 修复涂白功能，遇到粘连的框，会把两框相连部分的框涂白的问题
- 修复涂白功能，对话框在4个角落时，整页都会被涂白的问题
- 修复导出的PSD的Label图层分组，混合模式为“穿透”而不是“正常”的问题

## [1.6.1] - 2021-09-17
### Fixed
- 修复涂白功能在高DPI图片下可能将对话框的边缘覆盖的问题

## [1.6.0] - 2021-03-14
### Added
- 增强“预览匹配结果”按钮功能，显示名改为“检查图源匹配情况”，可以用它检查文件匹配（之前只在勾选“按顺序匹配图片”时可用），改用一个可滚动的文本框以显示大量内容
- 执行导入前，先检查图源、模板文件是否全部存在，有缺失则不继续执行，避免在运行过程中才发现错误
### Changed
- 启动时，将UI显示在屏幕中心
- 改进“按顺序匹配图片文件”功能，会自动剔除非图片文件，之前匹配到到txt的情况不会再出现了
- 发生未预料到的异常时，直接显示所有log方便排障
### Fixed
- 修复“按顺序匹配图片文件”的“预览匹配结果”不停地弹出提示窗的问题
- 修复当模板中的图层为相同名字时，不会被完全删除的问题（模板中原有的图层，在导入后应该被全部删除）

## [1.5.0] - 2020-05-19
### Added
- 增加PS文档模板功能：使用模板可以方便地实现一些格式设置，以替代之前一部分需要录制动作的操作
- PS文档功能UI选项：“自动”——根据当前系统语言自动选择模板；“不使用模板”——保持以前脚本的行为；“自定义模板”
- PS文档功能支持为每个标签分组自定义文本图层的样式，只需在模板文档中添加与分组同名的图层
- PS文档功能支持“dialog-overlay”图层，可自定义涂白覆盖层的样式
- 导入时自动保存配置，下次打开脚本时自动加载上次的配置
- 增加TIFF格式图片导入支持
- 增加“输出格式”选项，脚本将自动转换导出的格式，此前脚本仅支持保存为PSD格式
### Changed
- 此次更新配置项变更较大，不再兼容此前保存的ini配置文件，配置文件的格式改为JSON
- 为配合模板功能，将“输出横排文字”选项改为“文字方向”，选项有“默认”、“横向”、“竖向”
- UI，重新分类功能
- UI，修改表述“忽略图片文件名”->“按顺序匹配图片文件
- UI，“导出没有标号的文档”->“不输出未标号图片”，修改表述且默认输出全部图片，以免默认选项导致遗漏图片
### Fixed
- 修复行距、间距组合等格式丢失的问题，通过引入PS文档模板功能解决
- 修复PS动作不存在时报错的问题
- 修复文件名中存在中括号时，lp文本文件解析不正常的问题（by Jason23347）
- 修复路径中存在'%'时，脚本工作不正常的问题


## [1.4.1] - 2020-01-16
### Fixed
- 修复“执行动作组”功能，保存配置项失效的问题

## [1.4.0] - 2020-01-12
### Changed
- 发布时不再区分中、英文版本，由Photoshop中设置的语言自动切换
- 改变设置行距功能的行为，从“字符的行距值”改为“段落自动行距的百分比值”
- 默认启用设置行距功能（默认值120%）
- UI优化：调整UI元素位置，简化文字描述

## [1.3.0] - 2020-01-05
### Added
- 增加设置行距功能

### Changed
- 修改表述"处理无标号文档"->“导出没有标号的文档”
- “导出没有标号的文档”选项默认值为真，避免漏页

### Fixed
- 修复UI上不显示“使文字方向为横向”选项的问题
- 修复指定图源后缀名的JPEG没加“.”，导致文件名替换不正常的问题
- 修复文本行距默认可能不为“自动”的问题

## [1.2.2] - 2017-12-27
### Fixed
- 修复1.2.1脚本界面在mac下中文乱码的问题(发布时未转换成utf8)
- 修复导出过程中遇到ps无法打开的文件时报错崩溃的问题, 将所有导出过程中捕获到的错误在完毕后一次性显示出来

## [1.2.1] - 2017-10-28
### Fixed
- 修复1.2.0中修复的"CS2017下执行不存在的动作时提示'命令'播放'不可用'的问题"时造成动作全部不执行的问题

## [1.2.0] - 2017-06-18
开始使用语义化版本号
### Fixed
- 修复PS CS2017下执行不存在的动作时提示"命令'播放'不可用"的问题
